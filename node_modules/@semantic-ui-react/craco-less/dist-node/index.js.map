{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["const {\n  getLoader,\n  loaderByName,\n  removeLoaders,\n  throwUnexpectedConfigError\n} = require(\"@craco/craco\");\n\nconst CracoLessPlugin = require(\"craco-less\");\n\nconst path = require(\"path\");\n\nconst overrideWebpackConfig = ({\n  context,\n  pluginOptions,\n  webpackConfig\n}) => {\n  pluginOptions = {\n    lessLoaderOptions: {\n      lessOptions: {\n        math: 'always'\n      }\n    },\n    ...pluginOptions\n  }; // add alias to theme.config\n\n  webpackConfig.resolve.alias[\"../../theme.config$\"] = path.join(context.paths.appSrc, \"/semantic-ui/theme.config\"); // file-loader:\n  // theme.config, *.variables and *.overrides files should be excluded\n\n  const {\n    isFound,\n    match: fileLoaderMatch\n  } = getLoader(webpackConfig, loaderByName(\"file-loader\"));\n\n  if (!isFound) {\n    throwUnexpectedConfigError({\n      packageName: \"@semantic-ui-react/craco-less\",\n      message: `Can't find \"file-loader\" in the ${context.env} webpack config!`\n    });\n  }\n\n  fileLoaderMatch.loader.exclude.push(/theme.config$/);\n  fileLoaderMatch.loader.exclude.push(/\\.variables$/);\n  fileLoaderMatch.loader.exclude.push(/\\.overrides$/); // resolve-url-loader:\n  // should be removed as it causes bugs\n  // https://github.com/Semantic-Org/Semantic-UI-React/issues/3761\n\n  const {\n    hasRemovedAny\n  } = removeLoaders(webpackConfig, loaderByName(\"resolve-url-loader\"));\n\n  if (!hasRemovedAny) {\n    throwUnexpectedConfigError({\n      packageName: \"@semantic-ui-react/craco-less\",\n      message: `Can't find \"resolve-url-loader\" in the ${context.env} webpack config!`\n    });\n  } // less-loader:\n  // craco-less is reused\n\n\n  return CracoLessPlugin.overrideWebpackConfig({\n    context,\n    pluginOptions,\n    webpackConfig\n  });\n};\n\nmodule.exports = {\n  overrideWebpackConfig\n};"],"names":["getLoader","loaderByName","removeLoaders","throwUnexpectedConfigError","require","CracoLessPlugin","path","overrideWebpackConfig","context","pluginOptions","webpackConfig","lessLoaderOptions","lessOptions","math","resolve","alias","join","paths","appSrc","isFound","match","fileLoaderMatch","packageName","message","env","loader","exclude","push","hasRemovedAny","module","exports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM;EACJA,SADI;EAEJC,YAFI;EAGJC,aAHI;EAIJC;IACEC,OAAO,CAAC,cAAD,CALX;;AAOA,MAAMC,eAAe,GAAGD,OAAO,CAAC,YAAD,CAA/B;;AAEA,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAD,CAApB;;AAEA,MAAMG,qBAAqB,GAAG,CAAC;EAC7BC,OAD6B;EAE7BC,aAF6B;EAG7BC;CAH4B,KAIxB;EACJD,aAAa;IACXE,iBAAiB,EAAE;MACjBC,WAAW,EAAE;QACXC,IAAI,EAAE;;;KAGPJ,aANQ,CAAb,CADI;;EAUJC,aAAa,CAACI,OAAd,CAAsBC,KAAtB,CAA4B,qBAA5B,IAAqDT,IAAI,CAACU,IAAL,CAAUR,OAAO,CAACS,KAAR,CAAcC,MAAxB,EAAgC,2BAAhC,CAArD,CAVI;;;QAaE;IACJC,OADI;IAEJC,KAAK,EAAEC;MACLrB,SAAS,CAACU,aAAD,EAAgBT,YAAY,CAAC,aAAD,CAA5B,CAHb;;MAKI,CAACkB,OAAL,EAAc;IACZhB,0BAA0B,CAAC;MACzBmB,WAAW,EAAE,+BADY;MAEzBC,OAAO,EAAG,mCAAkCf,OAAO,CAACgB,GAAI;KAFhC,CAA1B;;;EAMFH,eAAe,CAACI,MAAhB,CAAuBC,OAAvB,CAA+BC,IAA/B,CAAoC,eAApC;EACAN,eAAe,CAACI,MAAhB,CAAuBC,OAAvB,CAA+BC,IAA/B,CAAoC,cAApC;EACAN,eAAe,CAACI,MAAhB,CAAuBC,OAAvB,CAA+BC,IAA/B,CAAoC,cAApC,EA3BI;;;;QA+BE;IACJC;MACE1B,aAAa,CAACQ,aAAD,EAAgBT,YAAY,CAAC,oBAAD,CAA5B,CAFjB;;MAII,CAAC2B,aAAL,EAAoB;IAClBzB,0BAA0B,CAAC;MACzBmB,WAAW,EAAE,+BADY;MAEzBC,OAAO,EAAG,0CAAyCf,OAAO,CAACgB,GAAI;KAFvC,CAA1B;GApCE;;;;SA4CGnB,eAAe,CAACE,qBAAhB,CAAsC;IAC3CC,OAD2C;IAE3CC,aAF2C;IAG3CC;GAHK,CAAP;CAhDF;;AAuDAmB,MAAM,CAACC,OAAP,GAAiB;EACfvB;CADF"}